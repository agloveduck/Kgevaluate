webpackJsonp([1],{"0Ggs":function(e,t){},"1SGi":function(e,t){},"1xsM":function(e,t){},"4Xv+":function(e,t){},"5xju":function(e,t){},E6sC:function(e,t){},E9kq:function(e,t){},INW6:function(e,t){},MrUA:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("tvR6");var s=a("7+uW"),i=a("zL8q"),n=a.n(i),o=a("mtWM"),r=a("/ocq"),l=a("mvHQ"),c=a.n(l),u={name:"Login",data:function(){return{usernameinput:"",passwordinput:"",showRegisterPanel:!1,showLoginPanel:!0,username:"",login_name:"",email:"",password:"",user_role:"普通用户"}},methods:{erroropen:function(){this.$message({showClose:!0,message:"用户名或密码错误",type:"error"})},successopen:function(){this.$message({message:"登录成功",type:"success"})},doLogin:function(){var e=this;console.log("用户名:"+this.usernameinput+"密码:"+this.passwordinput);var t=new FormData;t.append("login_name",this.usernameinput),t.append("password",this.passwordinput),this.$http.post("/api/login",t).then(function(t){console.log(t.data),"用户名或密码错误"===t.data?e.erroropen():e.$http.get("/api/get_user").then(function(t){sessionStorage.clear(),sessionStorage.setItem("userinfo",c()(t.data[0])),console.log(sessionStorage.getItem("userinfo")),e.successopen(),e.$router.push("/Home")})})},doRegister:function(){var e=this,t=new FormData;t.append("user_name",this.username),t.append("login_name",this.login_name),t.append("email",this.email),t.append("password",this.password),t.append("user_role",this.user_role),this.$http.post("/api/create_user",t).then(function(){e.$message({message:"注册成功",type:"success"}),e.showRegisterPanel=!1}).catch(function(){e.$message({message:"注册失败",type:"error"})});var a=new FormData;a.append("login_name",this.login_name),a.append("password",this.password),this.$http.post("/api/login",a).then(function(t){e.$http.get("/api/get_user").then(function(t){sessionStorage.clear(),sessionStorage.setItem("userinfo",c()(t.data[0])),console.log(sessionStorage.getItem("userinfo")),e.successopen(),e.$router.push("/Home")})})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("div",{staticClass:"login-wrap"},[e.showLoginPanel?a("el-form",{staticClass:"login-container"},[a("h1",{staticClass:"title"},[e._v("User Login")]),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"text",placeholder:"Username",autocomplete:"off"},model:{value:e.usernameinput,callback:function(t){e.usernameinput=t},expression:"usernameinput"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"password",placeholder:"Password",autocomplete:"off"},model:{value:e.passwordinput,callback:function(t){e.passwordinput=t},expression:"passwordinput"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.doLogin}},[e._v("Login")])],1),e._v(" "),a("el-row",{staticStyle:{"text-align":"center","margin-top":"-10px"}},[a("el-link",{attrs:{type:"primary"},on:{click:function(t){e.showRegisterPanel=!0,e.showLoginPanel=!1}}},[e._v("注册账号")])],1)],1):e._e(),e._v(" "),e.showRegisterPanel?a("el-form",{staticClass:"login-container"},[a("h1",{staticClass:"title"},[e._v("User Register")]),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"text",placeholder:"Username",autocomplete:"off"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"text",placeholder:"Login Name",autocomplete:"off"},model:{value:e.login_name,callback:function(t){e.login_name=t},expression:"login_name"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"text",placeholder:"Email",autocomplete:"off"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"password",placeholder:"Password",autocomplete:"off"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.doRegister}},[e._v("Register")])],1),e._v(" "),a("el-row",{staticStyle:{"text-align":"center","margin-top":"-10px"}},[a("el-link",{attrs:{type:"primary"},on:{click:function(t){e.showRegisterPanel=!1,e.showLoginPanel=!0}}},[e._v("已有账号,去登录")])],1)],1):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"intro-container"},[t("h2",{staticClass:"intro-title"},[this._v(" Welcome To Academic Online")]),this._v(" "),t("p",{staticClass:"intro-content"},[t("span",{staticClass:"intro-quote"},[this._v("“")]),this._v("我们的目标是为研究人员和学生提供一个高效、简便、可靠的学术资源管理工具。我们的系统支持多种类型的资源上传和存储，同时也提供了专业的评阅和管理功能，帮助用户更好地管理和利用自己的学术资源。我们的系统操作简单，界面友好，用户可以快速上手。无论您是研究生、教师还是学术管理者，我们都相信，我们的学术资源管理系统都能为您带来便捷和高效。"),t("span",{staticClass:"intro-quote"},[this._v("“")])])])}]};var p=a("VU/8")(u,d,!1,function(e){a("dXBe")},"data-v-ae25785c",null).exports,m={name:"Addbig",props:["privateflag"],data:function(){return{dialogFormVisible:!1,show_private:this.privateflag,form:{name:"",desc:"",is_private:0}}},methods:{resetForm:function(){this.form={}},addclick:function(){var e=this,t=new FormData;t.append("category_name",this.form.name),t.append("category_des",this.form.desc),t.append("create_id",JSON.parse(sessionStorage.getItem("userinfo"))._id),t.append("is_private",this.form.is_private),this.$http.post("/api/add_category",t).then(function(t){console.log(t.data),t.data&&(console.log("seccess!"),e.dialogFormVisible=!1)}),this.$emit("update-data")}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加大类别")]),e._v(" "),a("el-dialog",{attrs:{title:"大类别信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"大类别名称"}},[a("el-input",{attrs:{autocomplete:"off",prop:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"大类别描述"}},[a("el-input",{attrs:{type:"textarea",prop:"desc"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show_private,expression:"show_private"}],attrs:{label:"是否私有",prop:"isprivate"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.form.is_private,callback:function(t){e.$set(e.form,"is_private",t)},expression:"form.is_private"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addclick}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,f,!1,function(e){a("wb++")},null,null).exports,_={name:"Addsmall",props:["privateflag","categories"],data:function(){return{options:[],dialogFormVisible:!1,show_private:this.privateflag,form:{category_name:"",publish_name:"",publish_short_name:"",desc:"",publish_des:"",publish_language:"",publish_pages:1,is_private:0}}},methods:{resetForm:function(){this.form={}},addclick:function(){var e=new FormData;e.append("category_name",this.form.category_name),e.append("publish_name",this.form.publish_name),e.append("publish_short_name",this.form.publish_short_name),e.append("publish_partition",this.form.publish_partition),e.append("publish_des",this.form.publish_des),e.append("publish_language",this.form.publish_language),e.append("publish_pages",this.form.publish_pages),e.append("publish_home_page",1),e.append("publish_template_link","123"),e.append("publish_community_link","123"),e.append("publish_others","暂无"),e.append("create_id",JSON.parse(sessionStorage.getItem("userinfo"))._id),e.append("is_private",this.form.is_private),this.$http.post("/api/add_magazine",e).then(function(e){console.log(e.data),e.data&&console.log("seccess!")}),this.dialogFormVisible=!1,this.$emit("update-data")}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加小类别")]),e._v(" "),a("el-dialog",{attrs:{title:"小类别信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,size:"mini"}},[a("el-form-item",{attrs:{label:"所属大类别类别"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.category_name,callback:function(t){e.$set(e.form,"category_name",t)},expression:"form.category_name"}},e._l(e.categories,function(e){return a("el-option",{key:e.title,attrs:{label:e.title,value:e.title}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"小类别名称"}},[a("el-input",{attrs:{autocomplete:"off",prop:"publish_name"},model:{value:e.form.publish_name,callback:function(t){e.$set(e.form,"publish_name",t)},expression:"form.publish_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小类别简称"}},[a("el-input",{attrs:{autocomplete:"off",prop:"publish_short_name"},model:{value:e.form.publish_short_name,callback:function(t){e.$set(e.form,"publish_short_name",t)},expression:"form.publish_short_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"publish_partition"}},[a("el-input",{attrs:{autocomplete:"off",prop:"publish_partition"},model:{value:e.form.publish_partition,callback:function(t){e.$set(e.form,"publish_partition",t)},expression:"form.publish_partition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小类别描述"}},[a("el-input",{attrs:{type:"textarea",prop:"publish_des"},model:{value:e.form.publish_des,callback:function(t){e.$set(e.form,"publish_des",t)},expression:"form.publish_des"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小类别语言"}},[a("el-input",{attrs:{prop:"publish_language"},model:{value:e.form.publish_language,callback:function(t){e.$set(e.form,"publish_language",t)},expression:"form.publish_language"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小类别页数"}},[a("el-input",{attrs:{prop:"publish_pages"},model:{value:e.form.publish_pages,callback:function(t){e.$set(e.form,"publish_pages",t)},expression:"form.publish_pages"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show_private,expression:"show_private"}],attrs:{label:"是否私有",prop:"isprivate"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.form.is_private,callback:function(t){e.$set(e.form,"is_private",t)},expression:"form.is_private"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addclick}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(_,v,!1,function(e){a("Xywp")},null,null).exports,b={name:"Ava",data:function(){return{name:JSON.parse(sessionStorage.getItem("userinfo")).user_name}},components:{},methods:{exitclick:function(){var e=this;this.$http.get("/api/logout").then(function(t){sessionStorage.clear(),console.log("退出"),e.$router.push("/Login")})},handleCommand:function(e){"exit"===e?this.exitclick():alert(this.name)}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ava"},[a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("div",{staticStyle:{"white-space":"nowrap"}},[e._v("\n                "+e._s(e.name)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"exit"}},[e._v("退出")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"b"}},[e._v("其它功能")])],1)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(b,w,!1,function(e){a("WJvC")},"data-v-795a36c0",null).exports,y={name:"Showpdf",components:{},props:["academic_id","filename","flag","num"],data:function(){return{downloadbtn:"",previewbtn:""}},mounted:function(){0===this.flag&&(this.downloadbtn="下载当前版本",this.previewbtn="预览当前版本"),1===this.flag&&(this.downloadbtn="下载历史版本"+this.num,this.previewbtn="预览历史版本"+this.num)},methods:{preview:function(){var e=new FormData;e.append("academic_id",this.academic_id),this.$http.post("/api/show_resource",e,{responseType:"arraybuffer"}).then(function(e){var t=[];t.push(e.data);var a=window.URL.createObjectURL(new Blob(t,{type:"application/pdf"}));a&&window.open(a)}).catch(function(e){console.log(e)})},download:function(){var e=this,t=new FormData;t.append("academic_id",this.academic_id),this.$http.post("/api/download",t,{responseType:"arraybuffer"}).then(function(t){var a=new Blob([t.data],{type:"application/pdf;charset=utf-8"}),s=document.createElement("a"),i=window.URL.createObjectURL(a);s.href=i;var n=e.filename+".pdf";s.download=decodeURI(n),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}).catch(function(e){console.log(e)})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{on:{click:e.download}},[e._v(e._s(e.downloadbtn))]),e._v(" "),a("el-button",{on:{click:e.preview}},[e._v(e._s(e.previewbtn))])],1)},staticRenderFns:[]};var x=a("VU/8")(y,k,!1,function(e){a("0Ggs")},"data-v-3e933db5",null).exports,S={name:"Resource",props:["name","subtitle","abstract","academic_id","title","create_time","version","review_result"],components:{Showpdf:x},data:function(){return{user_id:JSON.parse(sessionStorage.getItem("userinfo"))._id,histoy_id:[],flag:0}},methods:{goToComments2:function(e,t){this.$router.push({path:"/Comments2/"+e+t})},showHistoy:function(){var e=this,t=new FormData;t.append("publish_category",this.title),t.append("magazine",this.subtitle),t.append("user_id",this.user_id),t.append("academic_name",this.name),this.$http.post("/api/search_history_version",t).then(function(t){console.log("历史版本:"+t.data),e.histoy_id.splice(0,e.histoy_id.length);for(var a=t.data.length,s=0;s<a;s++){var i={};i.academic_id=t.data[s]._id;var n="V"+t.data[s].version_first+"."+t.data[s].version_second;i.vers=n,e.histoy_id.push(i)}}).catch(function(e){console.log(e)})}},mounted:function(){this.showHistoy()}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resource"},[a("el-tabs",{staticClass:"con1",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"资源名称"}},[a("h3",[e._v("\n        "+e._s(e.name)+" Version:"+e._s(e.version)+"\n      ")]),e._v(" "),e.version>="1.0"?a("h3",{staticClass:"pass"},[e._v("已审阅通过")]):e._e(),e._v(" "),e.version<"1.0"?a("h3",{staticClass:"pass"},[e._v(e._s(e.review_result))]):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"资源摘要"}},[e._v("        "+e._s(e.abstract))]),e._v(" "),a("el-tab-pane",{attrs:{label:"资源详情"}},[a("Showpdf",{attrs:{academic_id:e.academic_id,flag:0,filename:e.name}})],1),e._v(" "),"0.1"!=e.version?a("el-tab-pane",{attrs:{label:"查看历史版本"}},e._l(e.histoy_id,function(t,s){return a("div",{key:s,staticStyle:{margin:"20px"}},[a("Showpdf",{attrs:{academic_id:t.academic_id,flag:1,filename:e.name,num:t.vers}})],1)}),0):e._e()],1),e._v(" "),a("div",{staticClass:"con"},[a("h2",[a("span",[e._v(e._s(e.title))]),e._v(" "),a("span",[e._v(e._s(e.subtitle))])]),e._v(" "),a("div",{staticClass:"links"},[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.goToComments2(e.academic_id,1)}}},[e._v("资源评阅结果")]),e._v(" "),a("br"),e._v(" "),a("i",{staticClass:"el-icon-s-promotion"}),e._v(" "),a("el-link",{attrs:{type:"primary"}},[e._v("提交")]),e._v(" "),a("el-link",{attrs:{type:"primary"}},[e._v("正式提交")])],1),e._v(" "),a("h3",[e._v("创建时间:"+e._s(e.create_time))])])],1)},staticRenderFns:[]};var R={name:"Resoucelist",props:["resouces","total"],data:function(){return{currentPage:1,pageSize:2}},components:{Resource:a("VU/8")(S,$,!1,function(e){a("5xju")},"data-v-9d9ded3a",null).exports},methods:{handleCurrentChange:function(e){this.currentPage=e}},mounted:function(){},computed:{displayedResources:function(){var e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.resouces.slice(e,t)}}},E={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"resourcelist"},[this._l(this.displayedResources,function(e,a){return t("div",{key:a},[t("Resource",{attrs:{name:e.academic_name,abstract:e.abstract,subtitle:e.magazine,title:e.publish_category,academic_id:e._id,create_time:e.create_time,version:e.version_first+"."+e.version_second,review_result:e.review_result}})],1)}),this._v(" "),t("el-pagination",{attrs:{layout:"prev, pager, next",total:this.total,"page-size":this.pageSize,"current-page":this.currentPage},on:{"current-change":this.handleCurrentChange}})],2)},staticRenderFns:[]};var F=a("VU/8")(R,E,!1,function(e){a("hlzb")},"data-v-145f2166",null).exports,I={name:"Addresource",props:["privateflag","categories"],data:function(){return{form:{publish_category:"",magazine:"",abstract:"",authorname:"",keywords:"",reviewer:[]},file:{},dialogFormVisible:!1,options:[],isLt2M:!1}},computed:{filteredCategories:function(){var e=this;return console.log(this.categories.filter(function(t){return t.title===e.form.publish_category})),""===this.form.publish_category?["请先选择大类别"]:this.categories.filter(function(t){return t.title===e.form.publish_category})[0].subTitle}},mounted:function(){var e=this;this.$http.get("/api/find_user").then(function(t){e.options=t.data,console.log("name:"+e.options)})},methods:{resetForm:function(e){this.$refs[e].resetFields(),this.isLt2M=!1},uploadFile:function(e){this.file=e.file},handleExceed:function(){this.$alert("文件数量超过限制",{confirmButtonText:"确定"})},beforeAvatarUpload:function(e){this.isLt2M=e.size/1024/1024<500,this.isLt2M||this.$message.error("上传文件大小不能超过 500MB!")},addclick:function(){var e=this;this.$refs.uploadPdf.submit(),console.log("作者:"+this.form.authorname);var t=new FormData;if(this.isLt2M){var a=this.form.reviewer.join(";");t.append("file",this.file),t.append("publish_category",this.form.publish_category),t.append("magazine",this.form.magazine),t.append("abstract",this.form.abstract),t.append("authors",this.form.authorname),t.append("keywords",this.form.keywords),t.append("reviewer",a),console.log(a+"-------"+this.form.authorname),this.$http.post("/api/upload",t).then(function(t){console.log(t.data),t.data&&(console.log("seccess!"),e.dialogFormVisible=!1)}).catch(function(e){console.log(e)});var s=new FormData;s.append("receivers",a),s.append("filename","【学术在线】-"+this.file.name),s.append("author",this.form.authorname),this.$http.post("/api/sendmail",s).then(function(t){console.log(t.data),t.data&&(console.log("seccess!"),e.dialogFormVisible=!1)}).catch(function(e){console.log(e)})}}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("上传资源")]),e._v(" "),a("el-dialog",{attrs:{title:"资源上传",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",style:{"max-width":"800px"},attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"大类别名称",prop:"publish_category"}},[a("el-select",{attrs:{placeholder:"请选择大类别"},model:{value:e.form.publish_category,callback:function(t){e.$set(e.form,"publish_category",t)},expression:"form.publish_category"}},e._l(e.categories,function(e){return a("el-option",{key:e.title,attrs:{label:e.title,value:e.title}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"小类别名称",prop:"magazine"}},[a("el-select",{attrs:{placeholder:"请选择小类别"},model:{value:e.form.magazine,callback:function(t){e.$set(e.form,"magazine",t)},expression:"form.magazine"}},e._l(e.filteredCategories,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"资源摘要",prop:"abstract"}},[a("el-input",{style:{width:"600px"},attrs:{type:"textarea",rows:5},model:{value:e.form.abstract,callback:function(t){e.$set(e.form,"abstract",t)},expression:"form.abstract"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"作者名字",prop:"authorname"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.authorname,callback:function(t){e.$set(e.form,"authorname",t)},expression:"form.authorname"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{autocomplete:"off"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评阅者姓名",prop:"reviewer"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.reviewer,callback:function(t){e.$set(e.form,"reviewer",t)},expression:"form.reviewer"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"hh"},[a("el-upload",{ref:"uploadPdf",staticClass:"upload-demo",attrs:{drag:"",action:"#",limit:1,"on-exceed":e.handleExceed,"auto-upload":!1,multiple:!1,"before-upload":e.beforeAvatarUpload,"http-request":e.uploadFile,accept:".pdf"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请上传不超过500M的PDF文件")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addclick}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(I,N,!1,function(e){a("E9kq")},"data-v-7248fc6b",null).exports,T={name:"ReviewRes",props:["name","subtitle","abstract","academic_id","create_time","title","version","review_status","authors"],components:{Showpdf:x},data:function(){return{user_role:JSON.parse(sessionStorage.getItem("userinfo")).user_role,showConfirm:!1}},methods:{goToComments2:function(e,t){this.$router.push({path:"/Comments2/"+e+t})},PassResouce:function(){var e=new FormData;e.append("academic_id",this.academic_id),e.append("isPass","通过"),this.$http.post("/api/review",e).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)}),this.showConfirm=!1,this.successopen()},successopen:function(){this.$message({message:"您已将资源通过",type:"success"})}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resource"},[a("el-tabs",{staticClass:"con1",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"资源名称"}},[a("h3",[e._v(e._s(e.name)+" Version:"+e._s(e.version))]),e._v(" "),a("h4",[e._v("作者:"+e._s(e.authors))]),e._v(" "),a("h3",{staticClass:"pass"},[e._v(e._s(e.review_status))])]),e._v(" "),a("el-tab-pane",{attrs:{label:"资源摘要"}},[e._v(e._s(e.abstract))]),e._v(" "),a("el-tab-pane",{attrs:{label:"资源详情"}},[a("Showpdf",{attrs:{academic_id:e.academic_id,flag:0,filename:e.name}})],1)],1),e._v(" "),a("div",{staticClass:"con"},[a("h2",[e._v(e._s(e.title)+" "+e._s(e.subtitle))]),e._v(" "),a("div",{staticClass:"links"},["超级管理员"===e.user_role?a("el-link",{attrs:{type:"primary"},on:{click:function(t){e.showConfirm=!0}}},[e._v("通过")]):e._e(),e._v(" "),a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.goToComments2(e.academic_id,0)}}},[e._v("评阅模板")])],1),e._v(" "),a("h3",{staticClass:"time"},[e._v("创建时间:"+e._s(e.create_time))])]),e._v(" "),a("el-dialog",{attrs:{title:"确认通过",visible:e.showConfirm,width:"30%",center:""},on:{"update:visible":function(t){e.showConfirm=t}}},[a("span",[e._v('确定要通过"'+e._s(e.name)+" Version:"+e._s(e.version)+'"吗？')]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showConfirm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.PassResouce()}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var V={name:"Review",data:function(){return{searchinput:"",resouces:[],currentPage:1,total:0,pageSize:2,flag:0}},components:{Ava:C,ReviewRes:a("VU/8")(T,O,!1,function(e){a("UcGH")},"data-v-1a183cc8",null).exports},created:function(){this.findall()},mounted:function(){this.flag=0,this.getReviews()},computed:{displayedResources:function(){var e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.resouces.slice(e,t)}},methods:{handleCurrentChange:function(e){this.currentPage=e},beforeRouteLeave:function(e,t,a){sessionStorage.setItem("pageState",c()(this.pageState)),a()},beforeRouteEnter:function(e,t,a){var s=JSON.parse(sessionStorage.getItem("pageState"));s&&(this.pageState=s),a()},havent_review:function(){var e=this,t=new FormData;t.append("user_id",JSON.parse(sessionStorage.getItem("userinfo"))._id),this.$http.post("/api/find_review",t).then(function(t){console.log(t.data),e.resouces=t.data,e.total=t.data.length}).catch(function(e){console.log(e)}),this.flag=0},have_review:function(){var e=this;this.flag=1;var t=new FormData;t.append("user_id",JSON.parse(sessionStorage.getItem("userinfo"))._id),this.$http.post("/api/reviewed",t).then(function(t){console.log(t.data),e.resouces=t.data,e.total=t.data.length}).catch(function(e){console.log(e)})},getReviews:function(){var e=this,t=new FormData;t.append("user_id",JSON.parse(sessionStorage.getItem("userinfo"))._id),this.$http.post("/api/all_review",t).then(function(t){console.log(t.data),e.resouces=t.data,e.total=t.data.length}).catch(function(e){console.log(e)})},findall:function(){var e=this;this.$http.get("/api/find_user_public_category").then(function(t){for(var a=t.data.length,s=0;s<a;s++){var i={};i.title=t.data[s].publish_category,i.subTitle=t.data[s].magazine,e.categories.push(i)}console.log(e.categories)})},searchclick:function(){alert("搜索内容为:"+this.searchinput)}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v("我的评阅")]),e._v(" "),a("div",{staticClass:"Home"},[a("el-link",{attrs:{icon:"el-icon-s-home",href:"#/home"}},[e._v("主页")]),e._v(" "),a("el-link",{attrs:{type:"danger",underline:!1},on:{click:e.havent_review}},[e._v("未审阅")]),e._v(" "),a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.have_review}},[e._v("已审阅")])],1),e._v(" "),a("div",{staticClass:"search_main"},[a("el-input",{attrs:{placeholder:"请输入您要查询的内容"},model:{value:e.searchinput,callback:function(t){e.searchinput=t},expression:"searchinput"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchclick},slot:"suffix"})])],1),e._v(" "),a("Ava")],1),e._v(" "),a("div",{staticClass:"main"},[0===e.resouces.length?a("el-empty",{attrs:{description:"暂无需要您评阅的资源"}}):e._e(),e._v(" "),e._l(e.displayedResources,function(t,s){return a("div",{key:s},[0===e.flag?a("ReviewRes",{attrs:{review_status:t.review_status?t.review_status:"未审阅",name:t.academic_name,abstract:t.abstract,subtitle:t.magazine,academic_id:t._id,create_time:t.create_time,title:t.publish_category,version:t.version_first+"."+t.version_second,authors:t.authors}}):e._e(),e._v(" "),1===e.flag?a("ReviewRes",{attrs:{review_status:t.review_status,name:t.academic.academic_name,abstract:t.academic.abstract,subtitle:t.academic.magazine,academic_id:t.academic._id,create_time:t.create_time,title:t.academic.publish_category,version:t.academic.version_first+"."+t.academic.version_second,authors:t.academic.authors}}):e._e()],1)}),e._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":2,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],2)])},staticRenderFns:[]};var L=a("VU/8")(V,U,!1,function(e){a("4Xv+")},"data-v-5de7f1cc",null).exports,D={name:"Showtemplate",components:{},props:["academic_id","filename"],data:function(){return{}},methods:{preview:function(){var e=new FormData;e.append("template_id",this.academic_id),this.$http.post("/api/show_template",e,{responseType:"arraybuffer"}).then(function(e){var t=[];t.push(e.data);var a=window.URL.createObjectURL(new Blob(t,{type:"application/pdf"}));a&&window.open(a)}).catch(function(e){console.log(e)})},download:function(){var e=this,t=new FormData;t.append("template_id",this.academic_id),this.$http.post("/api/download_template",t,{responseType:"arraybuffer"}).then(function(t){var a=new Blob([t.data],{type:"application/pdf;charset=utf-8"}),s=document.createElement("a"),i=window.URL.createObjectURL(a);s.href=i;var n=e.filename+".pdf";s.download=decodeURI(n),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}).catch(function(e){console.log(e)})}}},P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-link",{attrs:{type:"primary"},on:{click:this.download}},[this._v("下载")]),this._v(" "),t("el-link",{attrs:{type:"primary"},on:{click:this.preview}},[this._v("预览")])],1)},staticRenderFns:[]};var M={name:"Atemplate",props:["name","abstract","academic_id","create_time","authors"],components:{Showtemplate:a("VU/8")(D,P,!1,function(e){a("u5kb")},null,null).exports},data:function(){return{user_role:JSON.parse(sessionStorage.getItem("userinfo")).user_role}},methods:{}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resource"},[a("div",{staticClass:"con1"},[a("div",{staticClass:"title"},[a("h2",[e._v("【"+e._s(e.name)+"】简介:")])]),e._v(" "),a("div",{staticClass:"content"},[e._v("      "+e._s(e.abstract))]),e._v(" "),a("div",{staticClass:"others"},[a("Showtemplate",{attrs:{academic_id:e.academic_id,filename:e.name}}),e._v(" "),a("h3",[e._v("创建时间:"+e._s(e.create_time)+" 上传者:"+e._s(e.authors))])],1)])])},staticRenderFns:[]};var G={name:"Addtemplate",data:function(){return{form:{authorname:"",abstract:""},file:{},dialogFormVisible:!1,options:[]}},mounted:function(){var e=this;this.$http.get("/api/find_user").then(function(t){e.options=t.data,console.log("name:"+e.options)})},methods:{resetForm:function(){this.form={}},addclick:function(){this.$refs.uploadPdf.submit(),console.log("作者:"+this.form.authorname);var e=new FormData;e.append("file",this.file),e.append("abstract",this.form.abstract),e.append("authors",this.form.authorname),this.$http.post("/api/upload_template",e).then(function(e){console.log(e.data)}),this.dialogFormVisible=!1,this.$emit("update-data")},uploadFile:function(e){this.file=e.file},handleExceed:function(){this.$alert("文件数量超过限制",{confirmButtonText:"确定"})}}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("上传模板文件")]),e._v(" "),a("el-dialog",{attrs:{title:"模板信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"上传者"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.authorname,callback:function(t){e.$set(e.form,"authorname",t)},expression:"form.authorname"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"模板文件简介"}},[a("el-input",{attrs:{type:"textarea",prop:"abstract"},model:{value:e.form.abstract,callback:function(t){e.$set(e.form,"abstract",t)},expression:"form.abstract"}})],1)],1),e._v(" "),a("div",{staticClass:"hh"},[a("el-upload",{ref:"uploadPdf",staticClass:"upload-demo",attrs:{drag:"",action:"#",limit:1,"on-exceed":e.handleExceed,"auto-upload":!1,multiple:!1,"http-request":e.uploadFile,accept:".pdf"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传PDF文件")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addclick}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var H={name:"Template",components:{Ava:C,Atemplate:a("VU/8")(M,z,!1,function(e){a("E6sC")},"data-v-5f6bc241",null).exports,Addtemplate:a("VU/8")(G,J,!1,function(e){a("kKG1")},"data-v-e37197a2",null).exports},data:function(){return{searchinput:"",myTemplates:[],currentPage:1,total:0,pageSize:2}},mounted:function(){this.getTemplates()},computed:{displayedResources:function(){var e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.myTemplates.slice(e,t)}},methods:{handleCurrentChange:function(e){this.currentPage=e},getTemplates:function(){var e=this;this.$http.post("/api/find_all_template").then(function(t){e.myTemplates=t.data,e.total=t.data.length,console.log(t.data)}).catch(function(e){console.log(e)})},searchclick:function(){var e=this,t=new FormData;t.append("search_content",this.searchinput),this.$http.post("/api/search_template",t).then(function(t){e.myTemplates=t.data,console.log(t.data)}).catch(function(e){console.log(e)})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v("模板库")]),e._v(" "),a("div",{staticClass:"Home"},[a("el-link",{attrs:{icon:"el-icon-s-home",href:"#/home"}},[e._v("主页")]),e._v(" "),a("div",{staticClass:"addbtn"},[a("Addtemplate",{on:{"update-data":e.getTemplates}})],1)],1),e._v(" "),a("div",{staticClass:"search_main"},[a("el-input",{attrs:{placeholder:"请输入您要查询的内容"},model:{value:e.searchinput,callback:function(t){e.searchinput=t},expression:"searchinput"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchclick},slot:"suffix"})])],1),e._v(" "),a("Ava")],1),e._v(" "),a("div",{staticClass:"main"},[0===e.myTemplates.length?a("el-empty",{attrs:{description:"暂无模板文件"}}):e._e(),e._v(" "),a("div",{staticClass:"list-container"},e._l(e.displayedResources,function(e,t){return a("div",{key:t},[a("Atemplate",{attrs:{authors:e.authors,name:e.academic_name,abstract:e.abstract,academic_id:e._id,create_time:e.create_time}})],1)}),0),e._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var B=a("VU/8")(H,q,!1,function(e){a("UQ+x")},"data-v-7f1a2ba8",null).exports,W={name:"SubmissionGuide",components:{Ava:C},data:function(){return{info:"",options:[{value:"ACM COMPUTING SURVEYS",label:"ACM COMPUTING SURVEYS"},{value:"ACM JOURNAL ON EMERGING TECHNOLOGIES IN COMPUTING SYSTEMS",label:"ACM JOURNAL ON EMERGING TECHNOLOGIES IN COMPUTING SYSTEMS"},{value:"ACM SIGPLAN NOTICES",label:"ACM SIGPLAN NOTICES"},{value:"ACM TRANSACTIONS ON INFORMATION SYSTEMS",label:"ACM TRANSACTIONS ON INFORMATION SYSTEMS"},{value:"COMPUTER COMMUNICATION REVIEW",label:"COMPUTER COMMUNICATION REVIEW"},{value:"IEEE TRANSACTIONS ON KNOWLEDGE AND DATA ENGINEERING",label:"IEEE TRANSACTIONS ON KNOWLEDGE AND DATA ENGINEERING"},{value:"IEEE TRANSACTIONS ON PATTERN ANALYSIS AND MACHINE INTELLIGENCE",label:"IEEE TRANSACTIONS ON PATTERN ANALYSIS AND MACHINE INTELLIGENCE"},{value:"JOURNAL OF THE ACM",label:"JOURNAL OF THE ACM"}],value:""}},mounted:function(){},methods:{showinfo:function(){var e=this,t=new FormData;t.append("manageName",this.value),this.$http.post("/api/submissionguideline",t).then(function(t){console.log(t.data),e.info=t.data})},searchclick:function(){this.showinfo()}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v("投稿指南")]),e._v(" "),a("div",{staticClass:"Home"},[a("el-link",{attrs:{icon:"el-icon-s-home",href:"#/home"}},[e._v("主页")])],1),e._v(" "),a("div",{staticClass:"search_main"},[a("div",{staticClass:"wai"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,size:e.medium}})}),1),e._v(" "),a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchclick},slot:"suffix"})],1)]),e._v(" "),a("Ava")],1),e._v(" "),a("p",{domProps:{innerHTML:e._s(e.info)}})])},staticRenderFns:[]};var Y=a("VU/8")(W,j,!1,function(e){a("u2lD")},"data-v-d38a2e2a",null).exports,X={name:"Home",data:function(){return{user_id:JSON.parse(sessionStorage.getItem("userinfo"))._id,privateflag:1,name:JSON.parse(sessionStorage.getItem("userinfo")).user_name,user_role:JSON.parse(sessionStorage.getItem("userinfo")).user_role,searchinput:"",isShow:!("普通用户"===JSON.parse(sessionStorage.getItem("userinfo")).user_role),categories:[],contentValue:{index:"0",subIndex:"0"},resouces:[],$route:this.$route}},components:{Ava:C,Addbig:h,Addsmall:g,Resoucelist:F,Addresource:A,Review:L,Template:B,SubmissionGuide:Y},methods:{myclick:function(e,t){var a=this;this.contentValue={index:e,subIndex:t};var s=new FormData;s.append("publish_category",this.categories[e].title),s.append("magazine",this.categories[e].subTitle[t]),s.append("user_id",this.user_id),this.$http.post("/api/myacademic",s).then(function(e){a.resouces=e.data,console.log(a.resouces)}).catch(function(e){console.log(e)})},findall:function(){var e=this;this.categories.splice(0,this.categories.length);var t=new FormData;t.append("user_id",this.user_id),this.$http.post("/api/find_user_public_category",t).then(function(t){for(var a=t.data.length,s=0;s<a;s++){var i={};i.title=t.data[s].publish_category,i.subTitle=t.data[s].magazine,e.categories.push(i)}});var a=new FormData;a.append("user_id",this.user_id),this.$http.post("/api/find_category",a).then(function(t){for(var a=t.data.length,s=0;s<a;s++){var i={};i.title=t.data[s].category,i.subTitle=t.data[s].magazine,e.categories.push(i)}}),console.log(this.categories)},searchclick:function(){alert("搜索内容为:"+this.searchinput)},exitclick:function(){this.$http.get("/api/logout").then(function(e){sessionStorage.clear(),console.log("退出")})},addclick:function(){alert("此处预留新增接口")},handleCommand:function(e){"exit"===e?this.exitclick():alert("下次再补充新的功能")},handleOpen:function(e,t){alert(0)},handleClose:function(e,t){alert(0)},handleSelect:function(e,t){alert(0)}},watch:{$route:{handler:function(e,t){console.log("New:"+e),console.log("Old"+t),"/Home"===e.path&&this.findall()},deep:!0}},mounted:function(){var e=this;console.log("session:"+sessionStorage.getItem("userinfo")),this.findall();var t=new FormData;t.append("publish_category","ACM会议"),t.append("magazine","KDD"),t.append("user_id",this.user_id),this.$http.post("/api/myacademic",t).then(function(t){console.log("lllllll:"+t.data),e.resouces=t.data,console.log(e.resouces)}).catch(function(e){console.log(e)})}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v("我的资源")]),e._v(" "),a("div",{staticClass:"others",staticStyle:{"white-space":"nowrap"}},[a("el-link",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{icon:"el-icon-reading",href:"#/ElectronicJournalCenter"}},[e._v("杂志管理中心")]),e._v(" "),a("el-link",{attrs:{icon:"el-icon-message",href:"#/Review"}},[e._v("我的评阅")]),e._v(" "),a("el-link",{attrs:{icon:"el-icon-position",href:"#/SubmissionGuide"}},[e._v("投稿指南")]),e._v(" "),a("el-link",{attrs:{icon:"el-icon-notebook-1",href:"#/Template"}},[e._v("模板库")]),e._v(" "),a("div",{staticClass:"addbtn"},[a("Addresource",{attrs:{categories:e.categories,privateflag:e.privateflag}})],1)],1),e._v(" "),a("div",{staticClass:"search_main"},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入您要查询的内容"},model:{value:e.searchinput,callback:function(t){e.searchinput=t},expression:"searchinput"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchclick},slot:"suffix"})])],1),e._v(" "),a("Ava")],1),e._v(" "),a("div",{staticClass:"main"},[a("el-col",{staticClass:"leftBar",style:{width:e.isCollapse?"60px":"300px"},attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"rgb(85, 94, 99)","text-color":"#fff","active-text-color":"#fff"}},e._l(e.categories,function(t,s){return a("el-submenu",{key:s,attrs:{index:s+""},on:{open:e.handleOpen,close:e.handleClose}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),e._v(" "),e._l(t.subTitle,function(t,i){return a("el-menu-item",{key:i,attrs:{index:s+"-"+i},on:{click:function(t){return e.myclick(s,i)}}},[e._v("\n                            "+e._s(t)+"\n                        ")])})],2)}),1),e._v(" "),a("Addbig",{attrs:{privateflag:e.privateflag},on:{"update-data":e.findall}}),e._v(" "),a("Addsmall",{attrs:{categories:e.categories,privateflag:e.privateflag},on:{"update-data":e.findall}})],1),e._v(" "),a("div",{staticClass:"content"},[0===e.resouces.length?a("el-empty",{attrs:{description:"您还没有创建过此分类资源，来上传您的资源吧！"}}):e._e(),e._v(" "),a("Resoucelist",{attrs:{resouces:this.resouces,total:this.resouces.length}})],1)],1)])])},staticRenderFns:[]};var Q=a("VU/8")(X,K,!1,function(e){a("uBfX")},"data-v-0eabd979",null).exports,Z={name:"ElectronicJournalCenter",data:function(){return{privateflag:0,categories:[],contentValue:{index:"0",subIndex:"0"},searchinput:""}},components:{Ava:C,Addbig:h,Addsmall:g},created:function(){this.findall()},methods:{findall:function(){var e=this,t=new FormData;t.append("user_id",this.user_id),this.$http.post("/api/find_user_public_category",t).then(function(t){for(var a=t.data.length,s=0;s<a;s++){var i={};i.title=t.data[s].publish_category,i.subTitle=t.data[s].magazine,e.categories.push(i)}console.log(e.categories)})},myclick:function(e,t){this.contentValue={index:e,subIndex:t}},searchclick:function(){this.showinfo()},handleOpen:function(e,t){alert(0)},handleClose:function(e,t){alert(0)},handleSelect:function(e,t){alert(0)}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v("电子杂志管理中心")]),e._v(" "),a("div",{staticClass:"Home"},[a("el-link",{attrs:{icon:"el-icon-s-home",href:"#/home"}},[e._v("主页")]),e._v(" "),a("div",{staticClass:"addbtn"},[a("Addbig",{attrs:{privateflag:e.privateflag}}),e._v(" "),a("Addsmall",{attrs:{categories:e.categories,privateflag:e.privateflag}})],1)],1),e._v(" "),a("div",{staticClass:"search_main"},[a("el-input",{attrs:{placeholder:"请输入您要查询的内容"},model:{value:e.searchinput,callback:function(t){e.searchinput=t},expression:"searchinput"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchclick},slot:"suffix"})])],1),e._v(" "),a("Ava")],1),e._v(" "),a("div",{staticClass:"main"},[a("el-col",{staticClass:"leftBar",attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"rgb(85, 94, 99)","text-color":"#fff","active-text-color":"#fff"}},e._l(e.categories,function(t,s){return a("el-submenu",{key:s,attrs:{index:s+""},on:{open:e.handleOpen,close:e.handleClose}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),e._v(" "),e._l(t.subTitle,function(t,i){return a("el-menu-item",{key:i,attrs:{index:s+"-"+i},on:{click:function(){return e.myclick(s,i)}}},[e._v("\n                        "+e._s(t)+"\n                    ")])})],2)}),1)],1),e._v(" "),a("div",{staticClass:"content"},[e._v("\n            "+e._s(e.categories[e.contentValue.index].title)+"\n            "+e._s(e.categories[e.contentValue.index].subTitle[e.contentValue.subIndex])+"\n        ")])],1)])},staticRenderFns:[]};var te=a("VU/8")(Z,ee,!1,function(e){a("Tz1u")},"data-v-67ddae3e",null).exports,ae={name:"Comment",props:["academic_id"],data:function(){return{user_id:JSON.parse(sessionStorage.getItem("userinfo"))._id,username:JSON.parse(sessionStorage.getItem("userinfo")).user_name,showDeleteConfirm:!1,showDeleteConfirm2:!1,comments:[],currentIndex:null,currentSecondaryIndex:null,replyIndex:-1,newComment:"",newReply:""}},mounted:function(){this.showComment()},methods:{showComment:function(){var e=this,t=new FormData;t.append("academic_id",this.academic_id),this.$http.post("/api/show_comment",t).then(function(t){console.log(t.data),e.comments=t.data}).catch(function(e){console.log(e)})},addComment:function(){var e=new FormData;e.append("user_id",this.user_id),e.append("user_name",this.username),e.append("academic_id",this.academic_id),e.append("content",this.newComment),this.$http.post("/api/comment",e).then(function(e){console.log(e.data),e.data&&console.log("seccess!")}).catch(function(e){console.log(e)}),this.newComment="",this.showComment()},showReplyInput:function(e){this.replyIndex=e},addReply:function(e){var t=new FormData;t.append("reply_id",this.comments[e]._id),t.append("user_id",this.user_id),t.append("user_name",this.username),t.append("academic_id",this.academic_id),t.append("content",this.newReply),this.$http.post("/api/reply_comment",t).then(function(e){console.log(e.data),e.data&&console.log("seccess!")}).catch(function(e){console.log(e)}),this.replyIndex=-1,this.newReply="",this.showComment()},deleteComment:function(){var e=new FormData;e.append("comment_id",this.comments[this.currentIndex]._id),this.$http.post("/api/del_comment",e).then(function(e){console.log(e.data),e.data&&console.log("seccess!")}).catch(function(e){console.log(e)}),this.currentIndex=null,this.showComment(),this.showDeleteConfirm=!1},deleteReply:function(e,t){var a=new FormData;a.append("comment_id",this.comments[this.currentIndex].replies[this.currentSecondaryIndex]._id),this.$http.post("/api/del_comment",a).then(function(e){console.log(e.data),e.data&&console.log("seccess!")}).catch(function(e){console.log(e)}),this.showDeleteConfirm=!1,this.currentIndex=null,this.currentSecondaryIndex=null,this.showComment(),this.showDeleteConfirm2=!1}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment-section"},[a("div",{staticClass:"input-container"},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入评论",maxlength:"200","show-word-limit":""},model:{value:e.newComment,callback:function(t){e.newComment=t},expression:"newComment"}}),e._v(" "),a("button",{on:{click:e.addComment}},[e._v("发布")])],1),e._v(" "),e._l(e.comments,function(t,s){return a("div",{key:s,staticClass:"comment"},[a("div",{staticClass:"first-comment"},[a("div",{staticClass:"comment-header"},[a("i",{staticClass:"el-icon-user-solid"}),e._v(" "),a("span",{staticClass:"username"},[e._v(e._s(t.user_name))]),e._v(" "),a("p",{staticClass:"content"},[e._v(e._s(t.content))]),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(t.create_time))]),e._v(" "),a("button",{staticClass:"reply-button",on:{click:function(t){return e.showReplyInput(s)}}},[e._v("回复")]),e._v(" "),t.user_name===e.username?a("button",{staticClass:"reply-button",on:{click:function(t){e.showDeleteConfirm=!0,e.currentIndex=s}}},[e._v("删除")]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"确认删除",visible:e.showDeleteConfirm,width:"30%",center:""},on:{"update:visible":function(t){e.showDeleteConfirm=t}}},[a("span",[e._v("确定要删除此评论吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDeleteConfirm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteComment()}}},[e._v("确 定")])],1)])],1)]),e._v(" "),a("div",{staticClass:"secondary-comment-list"},e._l(t.replies,function(t,i){return a("div",{key:i,staticClass:"secondary-comment"},[a("div",{staticClass:"secondary-comment-header"},[a("i",{staticClass:"el-icon-user-solid"}),e._v(" "),a("span",{staticClass:"username"},[e._v(e._s(t.user_name))]),e._v(" "),a("p",{staticClass:"content"},[e._v(e._s(t.content))]),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(t.create_time))]),e._v(" "),t.user_name===e.username?a("button",{staticClass:"reply-button2",on:{click:function(t){e.showDeleteConfirm2=!0,e.currentIndex=s,e.currentSecondaryIndex=i}}},[e._v("删除")]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"确认删除",visible:e.showDeleteConfirm2,width:"30%",center:""},on:{"update:visible":function(t){e.showDeleteConfirm2=t}}},[a("span",[e._v("确定要删除此评论吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDeleteConfirm2=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteReply()}}},[e._v("确 定")])],1)])],1)])}),0),e._v(" "),e.replyIndex===s?a("div",{staticClass:"reply-input-container"},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入评论",maxlength:"200","show-word-limit":""},model:{value:e.newReply,callback:function(t){e.newReply=t},expression:"newReply"}}),e._v(" "),a("button",{staticClass:"reply-button",on:{click:function(t){return e.addReply(s)}}},[e._v("回复")])],1):e._e()])})],2)},staticRenderFns:[]};var ie={name:"Comments",components:{Ava:C,Comment:a("VU/8")(ae,se,!1,function(e){a("YhbR")},"data-v-2bde3d90",null).exports},data:function(){return{searchinput:"",academic_id:""}},created:function(){console.log(this.$route.params.academic_id),this.academic_id=this.$route.params.academic_id},methods:{goBack:function(){this.$router.back()}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v("资源评论页")]),e._v(" "),a("div",{staticClass:"Home"},[a("el-link",{attrs:{icon:"el-icon-back"},on:{click:e.goBack}},[e._v("返回")])],1),e._v(" "),a("div",{staticClass:"search_main"},[a("el-input",{attrs:{placeholder:"请输入您要查询的内容"},model:{value:e.searchinput,callback:function(t){e.searchinput=t},expression:"searchinput"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.searchclick},slot:"suffix"})])],1),e._v(" "),a("Ava")],1),e._v(" "),a("div",{staticClass:"main"},[a("Comment",{attrs:{academic_id:e.academic_id}})],1)])},staticRenderFns:[]};var oe=a("VU/8")(ie,ne,!1,function(e){a("zZqc")},"data-v-2a106684",null).exports,re={name:"Comment2",props:["name","merit","defect_format","defect_content","defect_language","defect_innovative","result","time"],components:{},data:function(){return{user_id:JSON.parse(sessionStorage.getItem("userinfo"))._id}},methods:{},mounted:function(){}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border"},[a("div",{staticClass:"name"},[a("i",{staticClass:"el-icon-user-solid"}),e._v("\n   "+e._s(e.name)+"\n ")]),e._v(" "),a("div",{staticClass:"time"},[e._v(e._s(e.time))]),e._v(" "),a("div",{staticClass:"content1"},[e._v("优点:"+e._s(e.merit))]),e._v(" "),a("div",{staticClass:"content2"},[e._v(" 格式问题:"+e._s(e.defect_format)+" ")]),e._v(" "),a("div",{staticClass:"content3"},[e._v(" 内容问题:"+e._s(e.defect_content))]),e._v(" "),a("div",{staticClass:"content4"},[e._v(" 语言问题:"+e._s(e.defect_language))]),e._v(" "),a("div",{staticClass:"content5"},[e._v(" 创新性问题:"+e._s(e.defect_innovative))]),e._v(" "),a("div",{staticClass:"content6"},[e._v(" 评阅结果: "+e._s(e.result)+"\n ")])])},staticRenderFns:[]};var ce={name:"Comments2",components:{Ava:C,Comment2:a("VU/8")(re,le,!1,function(e){a("1xsM")},"data-v-d3c7332e",null).exports},data:function(){return{flag:1,title:"资源评阅模板页",user_id:JSON.parse(sessionStorage.getItem("userinfo"))._id,username:JSON.parse(sessionStorage.getItem("userinfo")).user_name,comments:[],academic_id:this.$route.params.academic_id,dialogFormVisible:!1,form:{merit:"",defect_format:"",defect_content:"",defect_language:"",defect_innovative:"",result:""}}},mounted:function(){this.academic_id=this.$route.params.academic_id+this.$route.params.flag.slice(0,-1);var e=this.$route.path[this.$route.path.length-1];console.log("Last character:",e),this.flag=e,this.title="1"===e?"资源评阅结果":"资源评阅模板页",console.log("academic_id:",this.academic_id),this.showcomments()},methods:{showcomments:function(){var e=this,t=new FormData;t.append("academic_id",this.academic_id),this.$http.post("/api/show_comment_template",t).then(function(t){console.log(t.data),e.comments=t.data}).catch(function(e){console.log(e)})},resetForm:function(){this.form={}},goBack:function(){this.$router.back()},PassResouce:function(){var e=new FormData;e.append("academic_id",this.academic_id),this.$http.post("/api/review",e).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)})},addclick:function(){var e=this,t=new FormData;t.append("academic_id",this.academic_id),t.append("user_id",this.user_id),t.append("advantage",this.form.merit),t.append("format_problem",this.form.defect_format),t.append("content_problem",this.form.defect_content),t.append("language_problem",this.form.defect_language),t.append("innovation_problem",this.form.defect_innovative),t.append("review_result",this.form.result),t.append("user_name",this.username),this.$http.post("/api/comment_template",t).then(function(t){console.log(t.data),e.resouces=t.data}).catch(function(e){console.log(e)}),this.dialogFormVisible=!1,this.showcomments(),this.PassResouce()}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"Home"},[a("el-link",{attrs:{icon:"el-icon-back"},on:{click:e.goBack}},[e._v("返回")]),e._v(" "),0==e.flag?a("i",{staticClass:"el-icon-edit"}):e._e(),e._v(" "),0==e.flag?a("el-link",{on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("评阅模板")]):e._e()],1),e._v(" "),e._m(0),e._v(" "),a("Ava")],1),e._v(" "),a("div",{staticClass:"main"},[a("el-dialog",{attrs:{title:"评阅模板",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"优点"}},[a("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",placeholder:"请输入您认为这篇文章的优点"},model:{value:e.form.merit,callback:function(t){e.$set(e.form,"merit",t)},expression:"form.merit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章格式问题"}},[a("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",placeholder:"请输入您认为这篇文章的格式问题(如篇幅字数、图表格式、排版格式、参考文献引用格式、论文结构完整性）"},model:{value:e.form.defect_format,callback:function(t){e.$set(e.form,"defect_format",t)},expression:"form.defect_format"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章内容问题"}},[a("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",placeholder:"请输入您认为这篇文章的内容问题(如包括摘要、原理、方法、公式、数据、解释、结论等方面）"},model:{value:e.form.defect_content,callback:function(t){e.$set(e.form,"defect_content",t)},expression:"form.defect_content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章语言问题"}},[a("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",placeholder:"请输入您认为这篇文章的语言问题(如语法、标点符号、句子结构、用词不当等错误）"},model:{value:e.form.defect_language,callback:function(t){e.$set(e.form,"defect_language",t)},expression:"form.defect_language"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章创新性问题"}},[a("el-input",{attrs:{type:"textarea",rows:2,autocomplete:"off",placeholder:"请输入您认为这篇文章的创新性问题(如有创新性建议）"},model:{value:e.form.defect_innovative,callback:function(t){e.$set(e.form,"defect_innovative",t)},expression:"form.defect_innovative"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评阅结果"}},[a("el-radio-group",{model:{value:e.form.result,callback:function(t){e.$set(e.form,"result",t)},expression:"form.result"}},[a("el-radio",{attrs:{label:"评阅通过"}}),e._v(" "),a("el-radio",{attrs:{label:"仍需修改"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addclick}},[e._v("确 定")])],1)],1),e._v(" "),e._l(e.comments,function(e,t){return a("div",{key:t},[a("Comment2",{attrs:{name:e.user_name,merit:e.advantage,defect_format:e.format_problem,defect_content:e.content_problem,defect_language:e.language_problem,defect_innovative:e.innovation_problem,result:e.review_result,time:e.create_time}})],1)})],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"search_main"},[t("div")])}]};var de=a("VU/8")(ce,ue,!1,function(e){a("INW6")},"data-v-20ec8397",null).exports,pe=a("+qPk"),me={components:{Ava:C,VueEditor:pe.a},data:function(){return{content:"<h1>Some initial content</h1>"}},methods:{onEditorBlur:function(e){console.log("editor blur!",e)},onEditorFocus:function(e){console.log("editor focus!",e)},onSelectionChange:function(e){console.log("selection change!",e)}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("h2",{staticClass:"search_left"},[e._v("在线编辑")]),e._v(" "),a("div",{staticClass:"Home"},[a("el-link",{attrs:{icon:"el-icon-s-home",href:"#/home"}},[e._v("主页")]),e._v(" "),a("div",{staticClass:"addbtn"},[a("el-button",{attrs:{icon:"el-icon-finished"}},[e._v("保存")])],1)],1),e._v(" "),a("div",{staticClass:"search_main"},[a("Ava")],1)]),e._v(" "),a("div",{staticClass:"main"},[a("vue-editor",{on:{focus:e.onEditorFocus,blur:e.onEditorBlur,"selection-change":e.onSelectionChange},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)])},staticRenderFns:[]};var he=a("VU/8")(me,fe,!1,function(e){a("1SGi")},"data-v-8cbc6de6",null).exports;s.default.use(r.a);var _e=new r.a({routes:[{path:"/Login",name:"Login",component:p},{path:"/",name:"login",component:p},{path:"/Home",name:"Home",component:Q,meta:{requireLogin:!0}},{path:"/ElectronicJournalCenter",name:"ElectronicJournalCenter",component:te,meta:{requireLogin:!0}},{path:"/Template",name:"Template",component:B,meta:{requireLogin:!0}},{path:"/Editor",name:"Editor",component:he,meta:{requireLogin:!0}},{path:"/Review",name:"Review",component:L,meta:{requireLogin:!0}},{path:"/Comments/:academic_id",name:"Comments",component:oe,meta:{requireLogin:!0}},{path:"/Comments2/:academic_id:flag",name:"Comments2",component:de,meta:{requireLogin:!0}},{path:"/Showpdf",name:"Showpdf",component:x,meta:{requireLogin:!0}},{path:"/SubmissionGuide",name:"SubmissionGuide",component:Y,meta:{requireLogin:!0}}]}),ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var ge=a("VU/8")({name:"App"},ve,!1,function(e){a("MrUA")},null,null).exports;s.default.use(n.a),s.default.prototype.$http=o.a,s.default.config.productionTip=!1,s.default.use(pe.b),new s.default({el:"#app",router:_e,components:{App:ge},template:"<App/>"}),_e.beforeEach(function(e,t,a){e.matched.some(function(e){return e.meta.requireLogin})?sessionStorage.getItem("userinfo")?a():a({path:"/"}):a()})},Tz1u:function(e,t){},"UQ+x":function(e,t){},UcGH:function(e,t){},WJvC:function(e,t){},Xywp:function(e,t){},YhbR:function(e,t){},dXBe:function(e,t){},hlzb:function(e,t){},kKG1:function(e,t){},tvR6:function(e,t){},u2lD:function(e,t){},u5kb:function(e,t){},uBfX:function(e,t){},"wb++":function(e,t){},zZqc:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f0e70a93ba4858775601.js.map